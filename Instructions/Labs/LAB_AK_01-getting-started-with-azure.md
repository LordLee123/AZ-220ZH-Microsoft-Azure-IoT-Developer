---
lab:
    title: '实验室 01：Azure 入门'
    module: '模块 1：IoT 和 Azure IoT 服务简介'
---

# Azure 入门

## 实验室场景

你是一家名为 Contoso 的一流美食奶酪公司的 Azure IoT 开发人员。

Contoso 首席技术官已对以 IoT 为代表的商业机会进行了评估，并得出结论：Contoso 可以通过实施 IoT 解决方案收获显著的好处。根据这些评估结果，他们选择了 Microsoft Azure IoT。

首先，你需要熟悉 Azure 工具。

## 本实验室概览

在本实验室中，你将会熟悉 Azure 门户并设置资源组。本实验室包括以下练习：

* 浏览 Azure 门户
* 创建一个 Azure 仪表板和资源组

## 实验室说明

### 练习 1：探索 Azure 门户和仪表板

在开始使用 Azure IoT 服务之前，最好先熟悉 Azure 本身的工作方式。

虽然我们通常将 Azure 称为“云”，但实际上它是一个 Web 门户，旨在实现从单个网站访问 Azure 资源。所有 Azure 资源都可通过 Azure 门户访问。

#### 任务 1：检查 Azure 门户主页

1. 在 Web 浏览器中，要打开 Azure 门户，请导航到 [portal.azure.com](http://portal.azure.com)。

    登录 Azure 后，你将进入 Azure 门户。Azure 门户提供了可自定义的 UI，可用于访问 Azure 资源。

1. 在门户窗口的左上角，要打开 Azure 门户菜单，请单击汉堡菜单图标。

    在门户菜单顶部，你应该会看到包含四个菜单选项的部分：

    * 单击 **“创建资源”** 按钮后会打开一个页面，显示 Azure 市场可用的服务，其中许多提供免费选项。请注意，服务是按技术分组的（包括“物联网”），并且提供了一个搜索框。
    * 单击 **“主页”** 按钮后会打开一个自定义页面，显示指向 Azure 服务、最近访问的服务以及其他工具的链接。
    * 单击 **“仪表板”** 按钮后会打开一个页面，显示你的默认（或最近使用的）仪表板。你稍后将在本实验室中创建仪表板。

    * 单击 **“所有服务”** 按钮会打开一个页面，类似于上述 **“创建资源”** 按钮。

    门户菜单底部是 **“收藏夹”** 部分，这部分可以自定义来显示你的收藏，或最常用的资源。稍后在本实验室中，你将学习如何自定义该常见服务默认列表，使其成为你自己的收藏夹列表。

1. 在 Azure 门户菜单上，要显示 **“主页”** 页面，请单击 **“主页”**。

1. 在主页上，要显示数据中心区域的地图，请在 **“Azure 服务”** 选项下单击 **“服务运行状况”**。

    在订阅 Azure 资源时，你将选取一个要部署到的区域。Azure 是由分布在世界各地的一系列区域支持的。

    此地图显示与订阅关联区域的当前状态。绿色圆圈表明该区域的服务正常运行。

    对于任何云供应商（Azure、AWS、Google Cloud 等）而言，服务都会不时关闭。如果在服务运行状况地图上的某个区域旁边看到一个蓝色的“i”，则表示该区域的一项或多项服务正面临问题。Azure 通过在不同区域中运行应用程序的多个副本来缓解这些问题（一种称为*地理冗余*的做法）。如果某个区域的特定服务出现问题，则这些请求将滚动到另一个区域以完成该请求。这是在 Azure 云中托管应用的一大优势。Azure 负责解决这些问题，省去了你的麻烦。

1. 在 Azure 门户的左上角，要回到主页，请单击 **“Microsoft Azure”**。

    你也可以使用门户菜单执行一些简单导航。你将很快有机会尝试一些门户导航选项。

#### 任务 2：探索 Azure 服务选项

1. 打开 Azure 门户菜单，然后单击 **“所有服务”**。

    _所有服务_页面为你提供了几种不同的查看选项，并可用来访问 PaaS 和 IaaS 中的所有 Azure 服务。第一次打开“所有服务”__页面时，将看到“概览”__页。可从左侧菜单访问此视图。

    >**定义：**术语 **PaaS** 是**平台即服务**的首字母缩写，而 **IaaS** 则是**基础结构即服务**的首字母缩写

1. 在“所有服务”__页面上的“类别”__下，单击 **“全部”**。

    此视图显示的所有服务都组织成与每个类别相对应的组。顶部的“搜索”框可能会很有帮助。

1. 在“所有服务”__页面左侧的“类别”__下，单击 **“物联网”**。

    现在，服务列表仅限于与 IoT 解决方案直接相关的服务。

    Azure 门户上的服务/资源页面有时被称为_边栏选项卡_。在前几步打开“服务运行状况”页面时，你已打开一个“服务运行状况”边栏选项卡。

    Azure 门户将边栏选项卡用作一种导航模式，随着你对服务的钻研越来越深入，右侧将打开新的边栏选项卡。在水平导航时，这提供了一种痕迹导航形式。

1. 将鼠标指针悬停在 **“IoT 中心”**。

    将显示一个对话框。注意右上角的“星”形。当星形填满后，该服务将被选作收藏。收藏夹将显示在门户窗口左侧导航菜单上的收藏服务列表中。这样可以更轻松地访问你最常使用的服务。你可以通过选择最常用的服务来自定义收藏列表。

1. 在“IoT 中心”__对话框的右上角，要将 IoT 中心添加到你的收藏服务列表，请单击星形图标。

    此时星形图标应为实心。如果星形图标显示为轮廓，请再次单击。

    >**提示：**当你将新项目添加到收藏列表时，它将放在 Azure 门户菜单上收藏列表的底部。你可以通过拖放操作将收藏列表重新排列为所需的顺序。

    也可以按照相同的过程将以下服务添加到收藏列表：**设备预配服务**、**函数应用**、**流分析作业**以及 **Azure Cosmos DB**。

    > **注释**：  你可以通过单击所选服务的星形图标将该服务从收藏服务列表中移除。

1. 在“所有服务”__页面左侧的“类别”__下，单击 **“常规”**。

1. 确保选择以下服务作为收藏：

    * **订阅**
    * **资源组**

    已添加的收藏足以满足入门阶段的需求，但你仍可根据需要在_物联网_类别下向门户菜单添加其他收藏。

#### 任务 3：检查“工具栏”菜单

1. 注意门户顶部占据整个窗口宽度的工具栏。

    除了此工具栏最左侧的汉堡菜单图标之外，还有其他一些对你有帮助的项目。

    首先请注意，你有可以快速查找特定资源的_搜索资源_工具。

    搜索工具右侧是几个可用来访问常用工具的按钮。你可以将鼠标指针悬停在按钮上以显示按钮名称。

    * “Cloud Shell”__按钮会在门户窗口中打开一个经过身份验证的交互式 shell，你可以使用该 shell 来管理 Azure 资源。Azure Cloud Shell 支持 Bash 和 PowerShell。
    * “目录 + 订阅”__按钮将打开一个窗格，你可以使用该窗格来管理 Azure 订阅和帐户目录（Azure Active Directory 身份验证机制）。
    * 可打开通知窗格的“通知”__按钮。在处理长期进程时，“通知”窗格很有用。在本课程中，你将在创建和配置资源时监视通知。
    * 还有 *“设置”*、*“反馈”* 和 *“帮助”* 按钮。*“帮助”* 按钮包含帮助文档的链接和有用的键盘快捷键列表。

    最右边是你的帐户信息按钮，你可以使用该按钮来获取帐户密码和账单信息等内容。

1. 在工具栏上，单击 **“帮助”**，然后单击 **“帮助 + 支持”**

1. 在“帮助 + 支持”__边栏选项卡，请注意以下四个磁贴：“入门”__、“文档”__、“了解计费”__和“支持计划”__。

    “帮助 + 支持”__边栏选项卡可让你访问大量资源。你可能希望稍后再来进一步探讨这个问题。

1. 在“帮助 + 支持”__边栏选项卡，单击 **“了解计费”**

1. 在“Azure 文档”__页面的“按标题筛选”__文本框中，键入 **“防止意外成本”**

1. 在筛选器文本框下方，单击 **“防止意外成本”**

    如果*你*正在使用付费 Azure 订阅，并且负责计费（你是帐户管理员），则可以使用这些说明来设置计费警报。

### 练习 2：创建一个 Azure 仪表板和资源组

在 Azure 门户上，仪表板用于显示资源的自定义视图。通过使用磁贴显示信息，磁贴可以进行排列和调整大小，以帮助你以有用的方式组织资源。你可以创建许多不同的仪表板，这些仪表板提供不同的视图并用于不同的目的。

放置在仪表板上的每个磁贴都会公开一个或多个资源。除了显示单个资源的数据的磁贴以外，你还可以为名为资源组的对象创建磁贴。

资源组是一个逻辑组，其中包含项目或应用程序的相关资源。资源组可以包括解决方案的所有资源，或仅包括要作为组进行管理的那些资源。你可以根据最适合所在组织的选项，决定如何将资源分配至资源组。通常，将共享相同生命周期的资源添加到同一资源组，以便你可以轻松地将它们作为一组进行部署、更新和删除。

在以下任务中，你将：

* 创建一个可在本课程中使用的自定义仪表板
* 创建资源组并将“资源组”磁贴添加到仪表板

#### 任务 1：创建仪表板

1. 使用 Web 浏览器，导航到 Azure 门户。

    可以使用以下链接打开 Azure 门户：[Azure 门户](https://portal.azure.com)

1. 在“Azure 门户中心”菜单上，单击 **“仪表板”**。

1. 在“仪表板”__页面上，单击 **“+ 新建仪表板”**。

    我们将创建一个自定义仪表板来组织在本课程中使用的资源。

1. 若要命名新的仪表板，请将 **“我的仪表板”** 替换为 **AZ-220**

    在接下来的步骤中，将手动将磁贴添加到仪表板。另一种做法是使用拖放操作将磁贴库中的磁贴添加到提供的空间。

1. 在仪表板编辑器顶部，单击 **“完成自定义”**。

    此时会看到一个空的仪表板。

#### 任务 2：创建资源组并将“资源组”磁贴添加到仪表板

1. 在 Azure 门户菜单上，单击 **“资源组”**。

    此边栏选项卡中显示了你使用 Azure 订阅创建的所有资源组。如果你刚刚开始使用 Azure，则可能还没有任何资源组。

1. 在“资源组”__边栏选项卡的顶部菜单中，单击 **“+ 添加”**

    此操作将打开一个名为“创建资源组”__新边栏选项卡。

1. 花一点时间查看“创建资源组”__边栏选项卡的内容。

    请注意，资源组与订阅和区域相关联。考虑以下情况：

    * 将订阅与你的资源组关联起来会有什么帮助？
    * 将区域与你的资源组相关联起来会如何影响你包括在资源组中的内容？

1. 在 **“订阅”** 下拉菜单中，选择用于本课程的 Azure 订阅。

1. 在 **“资源组”** 文本框中，输入 **“AZ-220-RG”**。

    资源组的名称必须在你的订阅中为 **“唯一”** 。如果尚未使用你输入的名称并确认资源组命名规则，则会出现一个绿色的复选标记。

    >**提示：**Azure 文档描述了所有 Azure [命名规则和限制](https://docs.microsoft.com/zh-cn/azure/architecture/best-practices/resource-naming)。

1. 在 **“区域”**下拉菜单中，选择你附近的区域。  

    你也应该向你的导师咨询， [因为并非所有地区都提供所有服务](https://azure.microsoft.com/zh-cn/global-infrastructure/services/)。

    你需要为资源组提供一个位置，因为资源组存储有关资源的元数据，并且充当将在资源组中创建新资源的默认位置。出于合规性原因，你可能需要指定元数据的存储位置。通常，我们建议指定一个存放你的大部分资源的位置。使用相同的位置可以简化用于管理资源的模板。

1. 在“创建资源组”__边栏选项卡底部，单击 **“查看 + 创建”**。

    你应该会看到一条消息，通知你资源组设置已成功验证。

1. 要创建资源组，请单击 **“创建”**。

1. 在“资源组”__边栏选项卡的顶部菜单中，要查看新资源组，请单击 **“刷新”**

    在继续学习本课程的过程中，你将学到更多有关管理资源的知识。

1. 在已命名资源组列表中，单击你刚刚创建的 **AZ-220-RG** 资源组左侧的框。

    > **注释**：  不建议你在新边栏选项卡中将资源组打开，只要将其选中即可（左侧的复选标记）。

1. 在屏幕右侧，单击与资源组相对应的省略号 (...)，然后单击 **“固定到仪表板”**

1. 关闭“资源组”__边栏选项卡。

    现在，你的仪表板应该包含一个空的“资源”磁贴，但请放心，我们会尽快填充它。
